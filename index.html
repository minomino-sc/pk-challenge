<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PKãƒãƒ£ãƒ¬ãƒ³ã‚¸ï½œç®•è°·SC</title>

<style>
:root {
  --mino-main:#003366;
  --mino-accent:#ffcc00;
}

body{
  margin:0;
  padding:15px;
  font-family:sans-serif;
  text-align:center;
  background:#eef2f5;
}

h1{margin:5px 0 10px}

/* èŠç”Ÿ */
#game{
  position:relative;
  width:95%;
  max-width:360px;
  height:250px;
  margin:auto;
  overflow:hidden;
  border:2px solid #222;
  background:repeating-linear-gradient(
    90deg,#2e8b57,#2e8b57 12px,#3cb371 12px,#3cb371 24px
  );
}

/* ã‚´ãƒ¼ãƒ« */
.post{position:absolute;background:white}
.left{left:20px;bottom:35px;width:6px;height:120px}
.right{right:20px;bottom:35px;width:6px;height:120px}
.bar{left:20px;right:20px;bottom:155px;height:6px}

/* ãƒãƒƒãƒˆ */
#net{
  position:absolute;
  left:26px; right:26px; bottom:35px; height:120px;
  background:
    linear-gradient(#fff3 1px,transparent 1px),
    linear-gradient(90deg,#fff3 1px,transparent 1px);
  background-size:12px 12px;
  opacity:.6;
  transition:transform .25s ease;
}

/* ã‚­ãƒ¼ãƒ‘ãƒ¼SVG */
#keeper{
  position:absolute;
  bottom:35px;
  left:50%;
  width:60px;
  transform:translateX(-50%);
  transition:transform .45s cubic-bezier(.2,.9,.2,1);
}

/* ãƒœãƒ¼ãƒ« */
#ball{
  position:absolute;
  width:18px;height:18px;
  background:white;
  border-radius:50%;
  bottom:35px;left:50%;
  transform:translateX(-50%);
}

/* æ“ä½œ */
button{
  padding:10px 18px;
  margin:8px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:var(--mino-accent);
}

#reset{display:none}
</style>
</head>

<body>

<h1>âš½ PKãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼ˆç®•è°·SCï¼‰</h1>

<div id="game">
  <div class="post left"></div>
  <div class="post right"></div>
  <div class="post bar"></div>
  <div id="net"></div>

  <!-- äººå‹ã‚­ãƒ¼ãƒ‘ãƒ¼SVG -->
  <svg id="keeper" viewBox="0 0 100 120">
    <circle cx="50" cy="20" r="12" fill="#ffd2a6"/>
    <rect x="35" y="32" width="30" height="40" rx="8" fill="var(--mino-main)"/>
    <rect x="20" y="40" width="15" height="35" rx="6" fill="var(--mino-main)"/>
    <rect x="65" y="40" width="15" height="35" rx="6" fill="var(--mino-main)"/>
    <rect x="40" y="72" width="10" height="30" fill="#000"/>
    <rect x="50" y="72" width="10" height="30" fill="#000"/>
  </svg>

  <div id="ball"></div>
</div>

<div>
  <button onclick="shoot('å·¦')">å·¦</button>
  <button onclick="shoot('ä¸­å¤®')">ä¸­å¤®</button>
  <button onclick="shoot('å³')">å³</button>
</div>

<p id="score">ã‚ãªãŸ:0 | CPU:0</p>
<p id="msg"></p>
<button id="reset" onclick="resetGame()">å†æˆ¦</button>

<script>
let p=0,c=0,k=0;
const max=10;
let sudden=false;

const keeper=document.getElementById('keeper');
const ball=document.getElementById('ball');
const net=document.getElementById('net');
const score=document.getElementById('score');
const msg=document.getElementById('msg');
const reset=document.getElementById('reset');

/* åŠ¹æœéŸ³ï¼ˆBase64 è¶…è»½é‡ï¼‰ */
const kick=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA=");
const cheer=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABAAZGF0YQAAAAA=");

function shoot(dir){
 if(reset.style.display==="inline-block")return;
 k++;
 kick.play();

 const cpu=["å·¦","ä¸­å¤®","å³"][Math.floor(Math.random()*3)];
 const speed=Math.random()*0.4+0.25;

 /* ã‚­ãƒ¼ãƒ‘ãƒ¼é£›ã¶ */
 if(cpu==="å·¦") keeper.style.transform="translate(-110px,-20px) rotate(-35deg)";
 if(cpu==="å³") keeper.style.transform="translate(60px,-20px) rotate(35deg)";
 if(cpu==="ä¸­å¤®") keeper.style.transform="translateX(-50%) scale(1.1)";

 /* ãƒœãƒ¼ãƒ«ï¼ˆã‚«ãƒ¼ãƒ–ï¼‰ */
 ball.style.transition=`all ${speed}s ease-in`;
 ball.style.bottom="155px";
 ball.style.left=dir==="å·¦"?"32%":dir==="å³"?"68%":"50%";

 setTimeout(()=>{
   if(dir!==cpu){
     p++; msg.innerText="GOAL!! âš½ğŸ”¥"; cheer.play();
     net.style.transform="scaleY(1.08)";
   }else{
     c++; msg.innerText="ã‚»ãƒ¼ãƒ–â€¦ ğŸ§¤";
   }

   score.innerText=`ã‚ãªãŸ:${p} | CPU:${c}`;
   resetPos();

   if(!sudden && k===max){
     if(p!==c) end(); else {sudden=true; msg.innerText="ğŸ”¥ã‚µãƒ‰ãƒ³ãƒ‡ã‚¹ğŸ”¥";}
   }
   if(sudden && k>max && p!==c) end();
 },speed*1000);
}

function resetPos(){
 keeper.style.transform="translateX(-50%)";
 ball.style.transition="none";
 ball.style.left="50%";
 ball.style.bottom="35px";
 setTimeout(()=>net.style.transform="scaleY(1)",200);
}

function end(){
 msg.innerText+=p>c?"\nå‹åˆ©ğŸ‰":"\næ•—åŒ—ğŸ˜¢";
 reset.style.display="inline-block";
}

function resetGame(){
 p=c=k=0; sudden=false;
 score.innerText="ã‚ãªãŸ:0 | CPU:0";
 msg.innerText="";
 reset.style.display="none";
}
</script>

</body>
</html>
